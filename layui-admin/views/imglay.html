<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>图片处理</title>
    <link rel="stylesheet" href="../layui/css/layui.css">
    <link rel="stylesheet" href="../css/imglay.css">
</head>
<body>
<div class="layui-container" >
    <h2>图片管理</h2>
<div class="layui-row" style="border: #E8E8EA 1px solid;margin-top: 10px">
    <div class="layui-col-md4 layui-form" style="padding: 10px">
            <input lay-skin="primary" type="checkbox" id="checkall" name="type" lay-filter="allChoose" value="checkall">
        <span>全选</span>
        <button type="button" class="layui-btn" lay-event="del">批量删除</button>
        <button type="button" class="layui-btn" id="test1">
            <i class="layui-icon">&#xe67c;</i>上传图片
        </button>
    </div>
</div>
    <div class="layui-row" id="tupian">
        <div class="layui-col-md6">
         <div class="layui-row">
             <div class="layui-col-md6 tupian1">
                 <!--<li class="left">-->
                     <!--<img src="../img/a2.jpg" alt="" class="image">-->
                     <!--<input lay-skin="primary"type="checkbox" name="like[write]" title="全选">-->
                     <!--<span>标题内容1</span>-->
                     <!--<img src="../admin/img/3.png" alt="" class="img">-->
                 <!--</li>-->
                 <!--<li class="left">-->
                     <!--<img src="../img/a2.jpg" alt="" class="image">-->
                     <!--<input lay-skin="primary" type="checkbox" name="like[write]" title="全选">-->
                     <!--<span>标题内容2</span>-->
                     <!--<img src="../admin/img/3.png" alt=""width="15px"height="15px"class="img">-->
                 <!--</li>-->
                 <!--<li class="left">-->
                     <!--<img src="../img/a2.jpg" alt="" class="image">-->
                     <!--<input lay-skin="primary"type="checkbox" name="like[write]" title="全选">-->
                     <!--<span>标题内容3</span>-->
                     <!--<img src="../admin/img/3.png" alt=""width="15px"height="15px"class="img">-->
                 <!--</li>-->
             </div>
             <div class="layui-col-md6 tupian2">
                 <!--<li class="left">-->
                     <!--<img src="../img/a2.jpg" alt="" class="image">-->
                     <!--<input lay-skin="primary"type="checkbox" name="like[write]" title="全选">-->
                     <!--<span>标题内容1</span>-->
                     <!--<img src="../admin/img/3.png" alt=""width="15px"height="15px"class="img">-->
                 <!--</li>-->
                 <!--<li class="left">-->
                     <!--<img src="../img/a2.jpg" alt="" class="image">-->
                     <!--<input lay-skin="primary" type="checkbox" name="like[write]" title="全选">-->
                     <!--<span>标题内容1</span>-->
                     <!--<img src="../admin/img/3.png" alt=""width="15px"height="15px"class="img">-->
                 <!--</li>-->
                 <!--<li class="left">-->
                     <!--<img src="../img/a2.jpg" alt="" class="image">-->
                     <!--<input lay-skin="primary" type="checkbox" name="like[write]" title="全选">-->
                     <!--<span>标题内容1</span>-->
                     <!--<img src="../admin/img/3.png" alt=""width="15px"height="15px"class="img">-->
                 <!--</li>-->
             </div>
         </div>
        </div>
        <div class="layui-col-md6">
            <div class="layui-row">
                <div class="layui-col-md6 tupian3">
                    <!--<li class="left">-->
                        <!--<img src="../img/a2.jpg" alt=""width="100%"height="80%">-->
                        <!--<input lay-skin="primary" type="checkbox" name="like[write]" title="全选">-->
                        <!--<span>标题内容1</span>-->
                        <!--<img src="../admin/img/3.png" alt=""width="15px"height="15px"class="img">-->
                    <!--</li>-->
                    <!--<li class="left">-->
                        <!--<img src="../img/a2.jpg" alt=""width="100%"height="80%">-->
                        <!--<input lay-skin="primary" type="checkbox" name="like[write]" title="全选">-->
                        <!--<span>标题内容1</span>-->
                        <!--<img src="../admin/img/3.png" alt=""width="15px"height="15px"class="img">-->
                    <!--</li>-->
                    <!--<li class="left">-->
                        <!--<img src="../img/a2.jpg" alt=""width="100%"height="80%">-->
                        <!--<input lay-skin="primary"type="checkbox" name="like[write]" title="全选">-->
                        <!--<span>标题内容1</span>-->
                        <!--<img src="../admin/img/3.png" alt=""width="15px"height="15px"class="img">-->
                    <!--</li>-->
                </div>
                <div class="layui-col-md6 tupian4">
                    <!--<li class="left">-->
                        <!--<img src="../img/a2.jpg" alt=""width="100%"height="80%">-->
                        <!--<input lay-skin="primary" type="checkbox" name="like[write]" title="全选">-->
                        <!--<span>标题内容1</span>-->
                        <!--<img src="../admin/img/3.png" alt=""width="15px"height="15px"class="img">-->
                    <!--</li>-->
                    <!--<li class="left">-->
                        <!--<img src="../img/a2.jpg" alt=""width="100%"height="80%">-->
                        <!--<input lay-skin="primary"type="checkbox" name="like[write]" title="全选">-->
                        <!--<span>标题内容1</span>-->
                        <!--<img src="../admin/img/3.png" alt=""width="15px"height="15px"class="img">-->
                    <!--</li>-->
                    <!--<li class="left">-->
                        <!--<img src="../img/a2.jpg" alt=""width="100%"height="80%">-->
                        <!--<input lay-skin="primary"type="checkbox" name="like[write]" title="全选">-->
                        <!--<span>标题内容1</span>-->
                        <!--<img src="../admin/img/3.png" alt=""width="15px"height="15px"class="img">-->
                    <!--</li>-->
                </div>
            </div>
        </div>
    </div>
    <div class="ttt"></div>
</div>
<!--<script src="../admin/js/jquery.js"></script>-->
<script src="../layui/layui.js"></script>
<script type="text/javascript">
    layui.use(['form','jquery','upload','table'], function () {
        var form = layui.form;
        var $ = layui.jquery;
        var upload = layui.upload;

        var upload = layui.upload; //得到 upload 对象

        var upload = layui.upload; //得到 upload 对象

        upload.render({
            elem: '#test1'
            , url: "../json/option.json"
            ,choose: function(obj){
                //将每次选择的文件追加到文件队列
                var files = obj.pushFile();

                //预读本地文件，如果是多文件，则会遍历。(不支持ie8/9)
                obj.preview(function(index, file, result){
                    console.log(index); //得到文件索引
                    console.log(file); //得到文件对象
                    console.log(result); //得到文件base64编码，比如图片

                    obj.resetFile(index, file, '123.jpg'); //重命名文件名，layui 2.3.0 开始新增
                    $(".ttt").html("<li class=\"left\">\n" +
                        "                           <img src='"+result+"' alt=\"\" class=\"image\">\n" +
                        "                            <input lay-skin=\"primary\"type=\"checkbox\" name=\"like[write]\" title=\"全选\">\n" +
                        "                       <span>标题内容1 </span>\n" +
                        "                        <img src=\"../img/3.png\" alt=\"\"width=\"15px\"height=\"15px\"class=\"img\">\n" +
                        "                    <div></div></li>");
                    //这里还可以做一些 append 文件列表 DOM 的操作

                    //obj.upload(index, file); //对上传失败的单个文件重新上传，一般在某个事件中使用
                    //delete files[index]; //删除列表中对应的文件，一般在某个事件中使用
                });
            }
        });


        //点击全选, 勾选
        form.on('checkbox(allChoose)', function (data) {
            var child = $(".left input[type='checkbox']");
            child.each(function (index, item) {
                item.checked = data.elem.checked;
                console.log(item,index)
            });
            form.render('checkbox');
        });
        // $("#test1").on("change",function () {
        //   var formData= new FromData();
        //   formData.append("",$(".tupian")[0].files[0])
        //     $.ajax({
        //         url: "../json/option.json",
        //         type: "POST",
        //         data:formData,
        //         processData:false,
        //         contentType:false,
        //         success:function (response) {
        //             alert("123")
        //         }
        //     })
        // })
        $.ajax({
            type: "GET",
            url: "../json/option.json",
            dataType: "json",
            success: function (data) {
                console.log(data);
                $(".tupian").empty();
                data.data.forEach(item=>{
                    var li = `<li class="left">
                           <img src=${item.imgUrl} alt="" class="image">
                            <input lay-skin="primary"type="checkbox" name="like[write]" title="全选">
                       <span>${item.title}</span>
                        <img src=${item.img} alt=""width="15px"height="15px"class="img">
                    <div class="js-${item.id}"></div></li>`;
                    $(".tupian1").append(li);
                    var lia = `<li class="left">
                           <img src=${item.imgUrl} alt="" class="image">
                            <input lay-skin="primary"type="checkbox" name="like[write]" title="全选">
                       <span>${item.title}</span>
                        <img src=${item.img} alt=""width="15px"height="15px"class="img">
                    <div class="js-${item.id}"></div></li>`;
                    $(".tupian2").append(lia);
                    var lib = `<li class="left">
                           <img src=${item.imgUrl} alt="" class="image">
                            <input lay-skin="primary"type="checkbox" name="like[write]" title="全选">
                       <span>${item.title}</span>
                        <img src=${item.img} alt=""width="15px"height="15px"class="img">
                    <div class="js-${item.id}"></div></li>`;
                    $(".tupian3").append(lib);
                    var lic = `<li class="left">
                           <img src=${item.imgUrl} alt="" class="image">
                            <input lay-skin="primary"type="checkbox" name="like[write]" title="全选">
                       <span>${item.title}</span>
                        <img src=${item.img} alt=""width="15px"height="15px"class="img">
                    <div class="js-${item.id}"></div></li>`;
                    $(".tupian4").append(lic);

                    // if (item.children.length !== 0) {
                    //     getChildren(item.children, item.id);
                    // }
                    // $("#moli li").on("click",function(){
                    //     var address =$(this).attr("src");
                    //     $("iframe").attr("src",address);
                    // });
                    // console.log(index);
                });
            }
        });
//         var getChildren = function (childrenData, index) {
//             childrenData.forEach(subItm => {
//                 var subLi =`<li class="left">
//                            <img src=${subItm.imgUrl} alt="" class="image">
//                              <input lay-skin="primary"type="checkbox" name="like[write]" title="全选">
//                        <span>${subItmm.title}</span>
//                         <img src=${subItm.img} alt=""class="img">
//                     <div class="js-${subItm.id}"></div></li>
// <li class="left">
//                            <img src=${subItm.imgUrl} alt="" class="image">
//                              <input lay-skin="primary"type="checkbox" name="like[write]" title="全选">
//                        <span>${subItmm.title}</span>
//                         <img src=${subItm.img} alt=""class="img">
//                     <div class="js-${subItm.id}"></div></li>`;
//                 $(".js-" + id).append(subLi);
//                 if (subItm.children.length != 0) {
//                     getChildren(subItm.children, subItm.id);
//                 } else {
//                     return;
//                 }
//             })
//         };
    });

</script>
</body>
</html>